<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
  <body>
    <div th:fragment="table(watchlist)">
      <div class="watchlist-panel__table" th:if="${watchlist != null && !#lists.isEmpty(watchlist.items)}">
        <table class="watchlist-table">
          <thead>
            <tr>
              <th>코인</th>
              <th>실시간 시세 (KRW)</th>
              <th>실시간 시세 (USD)</th>
              <th>24시간 변동률</th>
              <th>한국 프리미엄</th>
              <th>24h 거래대금 (USD)</th>
            </tr>
          </thead>
          <tbody>
            <tr th:each="item : ${watchlist.items}" th:classappend="${item.custom} ? 'is-custom'">
              <td>
                <a th:href="@{'/coins/' + ${item.coinId}}" class="watchlist-coin">
                  <img th:if="${item.image != null}" th:src="${item.image}" th:alt="${item.name}" />
                  <div>
                    <strong th:text="${item.label}"></strong>
                    <small th:text="${#strings.toUpperCase(item.symbol)}"></small>
                  </div>
                </a>
              </td>
              <td th:text="${item.priceKrw == null ? '-' : #numbers.formatDecimal(item.priceKrw, 0, 'COMMA', 0, 'POINT') + ' KRW'}"></td>
              <td th:text="${item.priceUsd == null ? '-' : #numbers.formatDecimal(item.priceUsd, 0, 'COMMA', 2, 'POINT') + ' USD'}"></td>
              <td
                th:classappend="${item.change24h != null && item.change24h >= 0} ? ' is-up' : ' is-down'"
                th:text="${item.change24h == null ? '-' : #numbers.formatDecimal(item.change24h, 1, 'COMMA', 2, 'POINT') + '%'}"
              ></td>
              <td
                th:classappend="${item.premiumRate != null && item.premiumRate >= 0} ? ' is-up' : ' is-down'"
                th:text="${item.premiumRate == null ? '-' : #numbers.formatDecimal(item.premiumRate, 1, 'COMMA', 2, 'POINT') + '%'}"
              ></td>
              <td th:text="${item.volumeUsd == null ? '-' : '$' + #numbers.formatDecimal(item.volumeUsd, 0, 'COMMA', 0, 'POINT')}"></td>
            </tr>
          </tbody>
        </table>
      </div>
      <div class="empty-state" th:if="${watchlist == null || #lists.isEmpty(watchlist.items)}">
        관심 코인 데이터를 불러오지 못했습니다. 잠시 후 다시 시도해주세요.
      </div>
    </div>
  </body>
</html>
