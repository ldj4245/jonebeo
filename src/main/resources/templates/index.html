<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
  <head th:replace="fragments/layout :: head(${pageTitle})"></head>
  <body>
    <header th:replace="fragments/layout :: header"></header>
    <main class="container">
      <section>
        <h1>암호화폐 커뮤니티 허브</h1>
        <p class="subtitle">
          CoinGecko 데이터와 함께하는 실시간 시세, 분석, 커뮤니티 토론을
          경험해보세요.
        </p>
      </section>

      <section>
        <div class="section-title">🔥 실시간 시가총액 TOP 코인</div>
        <div th:if="${#lists.isEmpty(coins)}">
          잠시 후 다시 시도해주세요. 데이터를 불러오지 못했습니다.
        </div>
        <div class="coin-grid" th:if="${!#lists.isEmpty(coins)}">
          <article class="card" th:each="coin : ${coins}">
            <div class="coin-header">
              <img th:src="${coin.image}" th:alt="${coin.name}" />
              <div>
                <div th:text="${coin.name}"></div>
                <small th:text="${#strings.toUpperCase(coin.symbol)}"></small>
              </div>
            </div>
            <div
              class="coin-price"
              th:text="${#numbers.formatDecimal(coin.currentPrice, 0, 'COMMA', 2, 'POINT') + ' USD'}"
            ></div>
            <div
              class="coin-change"
              th:classappend="${coin.priceChangePercentage24h != null && coin.priceChangePercentage24h >= 0} ? ' up' : ' down'"
              th:text="${coin.priceChangePercentage24h == null ? '-' : #numbers.formatDecimal(coin.priceChangePercentage24h, 1, 'COMMA', 2, 'POINT') + '%'}"
            ></div>
            <div class="board-meta">
              24h 거래대금:
              <span
                th:text="${coin.totalVolume == null ? '-' : #numbers.formatDecimal(coin.totalVolume, 0, 'COMMA', 0, 'POINT')}"
              ></span>
              USD
            </div>
          </article>
        </div>
      </section>

      <section>
        <div class="section-title">🗂 추천 커뮤니티 게시판</div>
        <div class="grid" th:if="${!#lists.isEmpty(boards)}">
          <article class="card board-card" th:each="board : ${boards}">
            <a
              th:href="@{'/boards/' + ${board.slug}}"
              th:text="${board.name}"
            ></a>
            <p
              th:text="${board.description != null ? board.description : '소개 문구가 준비 중입니다.'}"
            ></p>
            <div
              class="board-meta"
              th:text="${'최초 등록일: ' + #temporals.format(board.createdAt, 'yyyy-MM-dd')}"
              th:if="${board.createdAt != null}"
            ></div>
          </article>
        </div>
        <div th:if="${#lists.isEmpty(boards)}">
          아직 게시판이 없습니다. 관리자가 곧 준비할 예정입니다.
        </div>
      </section>
    </main>
    <footer th:replace="fragments/layout :: footer"></footer>
  </body>
</html>
